# ğŸš€ å¦™å¹• / SmartSub

<div align="center">

[![Release](https://img.shields.io/github/v/release/buxuku/SmartSub?style=flat-square&logo=github&color=blue)](https://github.com/buxuku/SmartSub/releases/latest)
[![License](https://img.shields.io/badge/license-MIT-blue.svg?style=flat-square&logo=bookstack)](https://github.com/buxuku/SmartSub/blob/master/LICENSE)
[![Stars](https://img.shields.io/github/stars/buxuku/SmartSub?style=flat-square&logo=github)](https://github.com/buxuku/SmartSub/stargazers)

[ ğŸ‡¨ğŸ‡³ ä¸­æ–‡](README.md) | [ ğŸŒ English](README_EN.md) 


</div>

**è®©æ¯ä¸€å¸§ç”»é¢éƒ½èƒ½ç¾å¦™åœ°è¡¨è¾¾**

æ™ºèƒ½éŸ³è§†é¢‘å­—å¹•ç”Ÿæˆä¸å¤šè¯­è¨€ç¿»è¯‘æ‰¹é‡åŒ–è§£å†³æ–¹æ¡ˆ

![preview](./resources/preview.png)


## ğŸ’¥ç‰¹æ€§

å®ƒä¿ç•™äº†ä¹‹å‰ [VideoSubtitleGenerator](https://github.com/buxuku/VideoSubtitleGenerator) è¿™ä¸ªå‘½ä»¤è¡Œå·¥å…·çš„å…¨éƒ¨ç‰¹æ€§ï¼Œå¹¶æ–°å¢äº†ä»¥ä¸‹åŠŸèƒ½:

- æ”¯æŒå¤šç§è§†é¢‘/éŸ³é¢‘æ ¼å¼ç”Ÿæˆå­—å¹•
- æ”¯æŒå¯¹ç”Ÿæˆçš„å­—å¹•ï¼Œæˆ–è€…å¯¼å…¥çš„å­—å¹•è¿›è¡Œç¿»è¯‘
- æœ¬åœ°åŒ–å¤„ç†ï¼Œæ— é¡»ä¸Šä¼ è§†é¢‘ï¼Œä¿æŠ¤éšç§çš„åŒæ—¶ä¹Ÿæ‹¥æœ‰æ›´å¿«çš„å¤„ç†é€Ÿåº¦
- æ”¯æŒå¤šç§ç¿»è¯‘æœåŠ¡:
  - ç«å±±å¼•æ“ç¿»è¯‘
  - ç™¾åº¦ç¿»è¯‘
  - å¾®è½¯ç¿»è¯‘å™¨
  - DeepLX ç¿»è¯‘ ï¼ˆæ‰¹é‡ç¿»è¯‘å®¹æ˜“å­˜åœ¨è¢«é™æµçš„æƒ…å†µï¼‰
  - æœ¬åœ°æ¨¡å‹ Ollama ç¿»è¯‘
  - æ”¯æŒ OpenAI é£æ ¼ API ç¿»è¯‘ï¼Œå¦‚ [deepseek](https://www.deepseek.com/), [azure](https://azure.microsoft.com) ç­‰
- è‡ªå®šä¹‰å­—å¹•æ–‡ä»¶åï¼Œæ–¹ä¾¿å…¼å®¹ä¸åŒçš„æ’­æ”¾å™¨æŒ‚è½½å­—å¹•è¯†åˆ«
- è‡ªå®šä¹‰ç¿»è¯‘åçš„å­—å¹•æ–‡ä»¶å†…å®¹ï¼Œæ”¯æŒçº¯ç¿»è¯‘ç»“æœæˆ–åŸå­—å¹•+ç¿»è¯‘ç»“æœ
- æ”¯æŒç¡¬ä»¶åŠ é€Ÿ
   - NVIDIA CUDAï¼ˆWindows/Linuxï¼‰
   - Apple Core MLï¼ˆmacOS Mç³»åˆ—èŠ¯ç‰‡ï¼‰
- æ”¯æŒè¿è¡Œæœ¬åœ°å®‰è£…çš„ `whisper` å‘½ä»¤
- æ”¯æŒè‡ªå®šä¹‰å¹¶å‘ä»»åŠ¡æ•°é‡

## å…³äº CUDA çš„æ”¯æŒ

å› ä¸ºæœ¬äººä½¿ç”¨çš„æ˜¯è‹¹æœèŠ¯ç‰‡ï¼Œç¼ºå°‘ window CUDA çš„å¼€å‘ç¯å¢ƒï¼Œå¯¹äº CUDA çš„æ”¯æŒï¼Œå¼€å‘æµ‹è¯•éƒ½å­˜åœ¨è¾ƒå¤šåœºæ™¯æ— æ³•å…¼é¡¾çš„æƒ…å†µã€‚

- ç›®å‰æä¾›äº† CUDA 11.8.0 å’Œ 12.2.0 åŠ 12.4.1 ç‰ˆæœ¬çš„ç¼–è¯‘ï¼Œæ˜¯é€šè¿‡ github action è‡ªåŠ¨ç¼–è¯‘çš„ï¼Œå¯èƒ½å­˜åœ¨ç¯å¢ƒçš„å…¼å®¹é—®é¢˜
- è¦å¯ç”¨ CUDAï¼Œéœ€è¦ç¡®å®šè‡ªå·±çš„ç”µè„‘æ”¯æŒ CUDA, å¹¶å®‰è£…äº† CUDA toolkit. [CUDA download](https://developer.nvidia.com/cuda-downloads)
- CUDA toolkit çš„ç‰ˆæœ¬ç†è®ºä¸Šæ˜¯å‘åå…¼å®¹ï¼Œè¯·æ ¹æ®ä½ æ˜¾å¡æ”¯æŒçš„ç‰ˆæœ¬ï¼Œé€‰æ‹©åˆé€‚çš„ç‰ˆæœ¬
- å¦‚æœä¸‹è½½ generic ä½¿ç”¨æœ‰é—®é¢˜ï¼Œå¯ä»¥ä¸‹è½½ optimized ç‰ˆæœ¬ï¼Œè¿™ä¸ªç‰ˆæœ¬æ˜¯é’ˆå¯¹å„ä¸ªç³»åˆ—æ˜¾å¡çš„ä¼˜åŒ–ç‰ˆæœ¬ï¼Œå…¼å®¹æ€§æ›´å¼º

## å…³äº Core ML çš„æ”¯æŒ

ä» 1.20.0 ç‰ˆæœ¬å¼€å§‹ï¼Œåœ¨è‹¹æœèŠ¯ç‰‡ä¸Šï¼Œæ”¯æŒä½¿ç”¨ Core ML åŠ é€Ÿè¯­éŸ³è¯†åˆ«ã€‚å¦‚æœæ˜¯è‹¹æœèŠ¯ç‰‡ï¼Œè¯·ä¸‹è½½ mac arm64 ç‰ˆæœ¬çš„ release åŒ…ã€‚å°†ä¼šè‡ªåŠ¨å¯åŠ¨ Core ML åŠ é€Ÿã€‚

## ç¿»è¯‘æœåŠ¡

æœ¬é¡¹ç›®æ”¯æŒå¤šç§ç¿»è¯‘æœåŠ¡ï¼ŒåŒ…æ‹¬ç™¾åº¦ç¿»è¯‘ã€ç«å±±å¼•æ“ç¿»è¯‘ã€DeepLXã€Ollama æœ¬åœ°æ¨¡å‹ä»¥åŠ OpenAI é£æ ¼çš„ APIã€‚ä½¿ç”¨è¿™äº›æœåŠ¡éœ€è¦ç›¸åº”çš„ API å¯†é’¥æˆ–é…ç½®ã€‚

å¯¹äºç™¾åº¦ç¿»è¯‘ã€ç«å±±å¼•æ“ç­‰æœåŠ¡çš„ API ç”³è¯·æ–¹æ³•ï¼Œå¯ä»¥å‚è€ƒ https://bobtranslate.com/service/ ï¼Œæ„Ÿè°¢ [Bob](https://bobtranslate.com/) è¿™æ¬¾ä¼˜ç§€çš„è½¯ä»¶æä¾›çš„ä¿¡æ¯ã€‚

## æ¨¡å‹çš„é€‰æ‹©

ä»è§†é¢‘æˆ–è€…éŸ³é¢‘é‡Œé¢ï¼Œç”Ÿæˆå­—å¹•æ–‡ä»¶ï¼Œéœ€è¦ä½¿ç”¨åˆ° whisper çš„æ¨¡å‹ã€‚ whisper çš„æ¨¡å‹æœ‰å¤šç§ï¼Œä¸åŒçš„æ¨¡å‹ï¼Œç”Ÿæˆå­—å¹•çš„å‡†ç¡®æ€§ä¸åŒï¼Œå¤„ç†é€Ÿåº¦ä¹Ÿä¸åŒã€‚

- æ¨¡å‹è¶Šå¤§ï¼Œå‡†ç¡®æ€§è¶Šé«˜ï¼Œå¯¹æ˜¾å¡è¦æ±‚ä¹Ÿé«˜ï¼Œå¤„ç†é€Ÿåº¦è¶Šæ…¢
- ä½ç«¯è®¾å¤‡æˆ–è€…æ˜¾å¡ï¼Œæ¨è `tiny` æˆ–è€… `base` ç³»åˆ—çš„æ¨¡å‹ï¼Œå‡†ç¡®æ€§è™½ç„¶ä¸å¦‚ `large` ç³»åˆ—ï¼Œä½†æ˜¯å¤„ç†é€Ÿåº¦å¿«ï¼Œå ç”¨æ˜¾å­˜å°
- æ™®é€šç”µè„‘è®¾å¤‡ï¼Œå»ºè®®ä» `small` æˆ–è€… `base` å¼€å§‹ï¼Œå¹³è¡¡ç²¾åº¦ä¸èµ„æºæ¶ˆè€—
- å¯¹äºé«˜æ€§èƒ½æ˜¾å¡/å·¥ä½œç«™ï¼Œæ¨èä½¿ç”¨ `large` ç³»åˆ—çš„æ¨¡å‹ï¼Œå‡†ç¡®æ€§é«˜
- å¦‚æœåŸå§‹éŸ³è§†é¢‘æ˜¯è‹±æ–‡ï¼Œæ¨èä½¿ç”¨å¸¦ `en` çš„æ¨¡å‹ï¼Œä¸“ä¸ºè‹±è¯­ä¼˜åŒ–ï¼Œå‡å°‘å¤šè¯­è¨€å¹²æ‰°
- å¦‚æœåœ¨ä¹æ¨¡å‹å¤§å°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ `q5` æˆ–è€… `q8` ç³»åˆ—çš„æ¨¡å‹ï¼Œç›¸å¯¹äºéé‡åŒ–ç‰ˆæœ¬ï¼Œç‰ºç‰²å°‘é‡ç²¾åº¦æ¢å–æ›´å°ä½“ç§¯

## ğŸ”¦ä½¿ç”¨ (æ™®é€šç”¨æˆ·)

è¯·æ ¹æ®è‡ªå·±çš„ç”µè„‘ç³»ç»Ÿï¼ŒèŠ¯ç‰‡ï¼Œæ˜¾å¡ï¼Œé€‰æ‹©ä¸‹è½½å¯¹åº”å®‰è£…åŒ…ã€‚

- å¸¦ *generic* çš„ç‰ˆæœ¬ï¼Œæ˜¯é€šç”¨çš„ç‰ˆæœ¬ï¼Œç†è®ºä¸Šæ”¯æŒå¸¸è§çš„æ˜¾å¡
- å¸¦ *optimized* çš„ç‰ˆæœ¬ï¼Œæ˜¯ä¼˜åŒ–ç‰ˆæœ¬ï¼Œæä¾›äº†é’ˆå¯¹å„ä¸ªç³»åˆ—æ˜¾å¡çš„ä¼˜åŒ–ï¼Œå…¼å®¹æ€§æ›´å¼º

| ç³»ç»Ÿ | èŠ¯ç‰‡ | æ˜¾å¡ | ä¸‹è½½å®‰è£…åŒ… |
| ---- | ---- | ---- | ---- |
| Windows | x64 | CUDA >= 11.8.0 < 12.0.0 | windows-x64_cuda11.8.0 |
| Windows | x64 | CUDA >= 12.4.1 | windows-x64_cuda12.4.1 |
| Windows | x64 | CUDA >= 12.2.0 | windows-x64_cuda12.2.0 |
| Windows | x64 | æ—  CUDA | windows-x64_no_cuda |
| Mac | Apple | æ”¯æŒ CoreML | mac-arm64 |
| Mac | Intel | ä¸æ”¯æŒ CoreML | mac-x64 |

1. å‰å¾€ [release](https://github.com/buxuku/video-subtitle-master/releases) é¡µé¢æ ¹æ®è‡ªå·±çš„æ“ä½œç³»ç»Ÿä¸‹è½½å®‰è£…åŒ…
2. å®‰è£…å¹¶è¿è¡Œç¨‹åº
3. ä¸‹è½½æ¨¡å‹
4. åœ¨ç¨‹åºä¸­é…ç½®æ‰€éœ€çš„ç¿»è¯‘æœåŠ¡
5. é€‰æ‹©è¦å¤„ç†çš„éŸ³è§†é¢‘æ–‡ä»¶æˆ–å­—å¹•æ–‡ä»¶
6. è®¾ç½®ç›¸å…³å‚æ•°ï¼ˆå¦‚æºè¯­è¨€ã€ç›®æ ‡è¯­è¨€ã€æ¨¡å‹ç­‰ï¼‰
7. å¼€å§‹å¤„ç†ä»»åŠ¡

## ğŸ”¦ä½¿ç”¨ (å¼€å‘ç”¨æˆ·)

1ï¸âƒ£ å…‹éš†æœ¬é¡¹ç›®åœ¨æœ¬åœ°

```shell
git clone https://github.com/buxuku/video-subtitle-master.git
```

2ï¸âƒ£ åœ¨é¡¹ç›®ä¸­æ‰§è¡Œ `yarn install` æˆ–è€… `npm install`

```shell
cd video-subtitle-master
yarn install 
```

å¦‚æœæ˜¯ windows å¹³å°ï¼Œè¯·å‰å¾€ https://github.com/buxuku/whisper.cpp/releases/tag/latest ä¸‹è½½å¯¹åº”çš„ node æ–‡ä»¶ï¼Œå¹¶é‡å‘½åä¸º `addon.node` , è¦†ç›–æ”¾åœ¨ `extraResources/addons/` ç›®å½•ä¸‹ã€‚

3ï¸âƒ£ ä¾èµ–åŒ…å®‰è£…å¥½ä¹‹åï¼Œæ‰§è¡Œ `yarn dev` æˆ–è€… `npm run dev` å¯åŠ¨é¡¹ç›®

```shell
yarn dev
```

## æ‰‹åŠ¨ä¸‹è½½å’Œå¯¼å…¥æ¨¡å‹

å› ä¸ºæ¨¡å‹æ–‡ä»¶æ¯”è¾ƒå¤§ï¼Œå¦‚æœé€šè¿‡è¯¥è½¯ä»¶ä¸‹è½½æ¨¡å‹ä¼šå­˜åœ¨éš¾ä»¥ä¸‹è½½çš„æƒ…å†µï¼Œå¯ä»¥æ‰‹åŠ¨ä¸‹è½½æ¨¡å‹å¹¶å¯¼å…¥åˆ°åº”ç”¨ä¸­ã€‚ä»¥ä¸‹æ˜¯ä¸¤ä¸ªå¯ç”¨äºä¸‹è½½æ¨¡å‹çš„é“¾æ¥ï¼š

1. å›½å†…é•œåƒæºï¼ˆä¸‹è½½é€Ÿåº¦è¾ƒå¿«ï¼‰ï¼š
   https://hf-mirror.com/ggerganov/whisper.cpp/tree/main

2. Hugging Face å®˜æ–¹æºï¼š
   https://huggingface.co/ggerganov/whisper.cpp/tree/main

å¦‚æœæ˜¯è‹¹æœèŠ¯ç‰‡ï¼Œéœ€è¦åŒæ—¶ä¸‹è½½æ¨¡å‹å¯¹åº”çš„ encoder.mlmodelc æ–‡ä»¶ã€‚å¹¶è§£å‹å‡ºæ¥æ”¾åœ¨æ¨¡å‹ç›¸åŒç›®å½•ä¸‹ã€‚ï¼ˆå¦‚æœæ˜¯ q5 æˆ–è€… q8 ç³»åˆ—çš„æ¨¡å‹ï¼Œæ— é¡»ä¸‹è½½è¯¥æ–‡ä»¶ï¼‰

ä¸‹è½½å®Œæˆåï¼Œæ‚¨å¯ä»¥é€šè¿‡åº”ç”¨çš„"æ¨¡å‹ç®¡ç†"é¡µé¢ä¸­çš„"å¯¼å…¥æ¨¡å‹"åŠŸèƒ½å°†ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶å¯¼å…¥åˆ°åº”ç”¨ä¸­ã€‚æˆ–è€…ç›´æ¥å¤åˆ¶åˆ°æ¨¡å‹ç›®å½•é‡Œé¢å³å¯ã€‚

å¯¼å…¥æ­¥éª¤ï¼š
1. åœ¨"æ¨¡å‹ç®¡ç†"é¡µé¢ä¸­ï¼Œç‚¹å‡»"å¯¼å…¥æ¨¡å‹"æŒ‰é’®ã€‚
2. åœ¨å¼¹å‡ºçš„æ–‡ä»¶é€‰æ‹©å™¨ä¸­ï¼Œé€‰æ‹©æ‚¨ä¸‹è½½çš„æ¨¡å‹æ–‡ä»¶ã€‚
3. ç¡®è®¤å¯¼å…¥åï¼Œæ¨¡å‹å°†è¢«æ·»åŠ åˆ°æ‚¨çš„å·²å®‰è£…æ¨¡å‹åˆ—è¡¨ä¸­ã€‚

## å¸¸è§é—®é¢˜

##### 1.æç¤ºåº”ç”¨ç¨‹åºå·²æŸåï¼Œæ— æ³•æ‰“å¼€ã€‚
åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š

```shell
sudo xattr -dr com.apple.quarantine /Applications/Video\ Subtitle\ Master.app
```
ç„¶åå†æ¬¡è¿è¡Œåº”ç”¨ç¨‹åºã€‚

## è´¡çŒ®

ğŸ‘ğŸ» æ¬¢è¿æäº¤ Issue å’Œ Pull Request æ¥å¸®åŠ©æ”¹è¿›è¿™ä¸ªé¡¹ç›®ï¼

## æ”¯æŒ

â­ å¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œæ¬¢è¿ç»™æˆ‘ä¸€ä¸ª starï¼Œæˆ–è€…è¯·æˆ‘å–ä¸€æ¯å’–å•¡ï¼ˆè¯·å¤‡æ³¨ä½ çš„ github è´¦å·ï¼‰ã€‚

ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦â€ğŸ‘¦ å¦‚æœæ‚¨æœ‰ä»»ä½•ä½¿ç”¨é—®é¢˜ï¼Œæ¬¢è¿åŠ å…¥å¾®ä¿¡äº¤æµç¾¤ï¼Œä¸€èµ·äº¤æµå­¦ä¹ ã€‚

| æ”¯ä»˜å®æ”¶æ¬¾ç                               | å¾®ä¿¡èµèµç                               | å¾®ä¿¡äº¤æµç¾¤                                |
|-------------------------------------|------------------------------------|--------------------------------------|
| ![æ”¯ä»˜å®æ”¶æ¬¾ç ](./resources/donate_alipay.jpg) | ![å¾®ä¿¡èµèµç ](./resources/donate_wechat.jpg) | ![å¾®ä¿¡äº¤æµç¾¤](./resources/WechatIMG428.png)  |


## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ã€‚è¯¦æƒ…è¯·è§ [LICENSE](LICENSE) æ–‡ä»¶ã€‚

## Star History

[![Star History Chart](https://api.star-history.com/svg?repos=buxuku/video-subtitle-master&type=Date)](https://star-history.com/#buxuku/video-subtitle-master&Date)
